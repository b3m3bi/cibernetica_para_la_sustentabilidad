{
  "hash": "fe0e41161b0721e15a6fd40a3aa55672",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"08 - Cargar datos\"\noutput: html\neditor_options: \n  chunk_output_type: console\n---\n\n\n\n\n\n# Introducción\n\nHasta ahora hemos visto:\n\n1.  Cómo trabajar con notebooks de R\n2.  Cómo hacer operaciones aritméticas\n3.  Cómo trabajar con strings o cadenas de texto\n4.  Cómo crear y usar variables\n5.  Cómo trabajar con vectores\n6.  Cómo trabajar con funciones\n7.  Cómo cargar y usar paquetes\n\n¡Ya tenemos las herramientas necesarias para empezar a trabajar con datos reales!\n\nEn este notebook vemos cómo podemos cargar datos en R.\n\n**Objetivos**\n\n-   Cargar archivos de datos a RStudio\n-   Leer datos en R con tidyverse\n-   Ver tablas de datos\n\n# Obtener datos\n\nEn este notebook vamos a explorar datos de pokemon.\n\n**Instrucciones**\n\n1.  Abre el siguiente enlace: [Datos pokemón](https://gist.githubusercontent.com/armgilles/194bcff35001e7eb53a2a8b441e8b2c6/raw/92200bc0a673d5ce2110aaad4544ed6c4010f687/pokemon.csv)\n2.  Da click en *Archivo* \\> *Guardar página como...* (da click en `CTRL + S`) y guarda los datos en tu computadora. Asegúrate de dejarle la extensión de archivo `.csv`\n\n# Archivos .csv\n\nEl archivo que se te debió descargar es uno con extensión `.csv`. Estos son archivos muy comunes cuando trabajamos con datos. csv significa «Comma Separated Values», es decir, valores separados por comas. Este archivo lo puedes abrir con varios programas, por ejemplo, con un editor de texto cualquiera como *Block de notas* en Windows o *TextEdit* de Mac. Si lo abres verás algo así:\n\n![](./imgs/csv_editor_texto.png)\n\nLa primera fila nos da el nombre de las variables que tenemos separados por comas. Los nombres son bastante descriptivos y podemos facilmente deducir qué datos tenemos:\n\n-   `#`: un identificador\n-   `Name`: el nombre del pokemón\n-   `Type 1`, `Type 2`: el tipo de pokemón\n-   `HP`: el poder total del pokemón\n-   `Attack`, `Defense`, `Sp. Atk`, `Sp. Def`, `Speed`: el puntaje de ataque, defensa, ataque y defensa especial y la velocidad\n-   `Generation`: la generación a la que pertenece\n-   `Legendary`: si es un pokemón legendario o no\n\nLas siguientes filas nos dan los valores de las variables para distintos pokemón.\n\nPor ejemplo, en la segunda fila tenemos los datos:\n\n-   `Bulbasaur`\n-   `Grass`\n-   `Poison`\n-   `318`\n\nEsto nos dice que en *Bulbasaur es un pokemón de tipo pasto y veneno y que su HP es 318*.\n\nComo podrás notar este archivo es similar a una tabla y si lo abres en una aplicación de hojas de cáclulo como Excel, Google Sheets o LibreOffice Calc, verás algo así:\n\n![](./imgs/csv_hoja_de_calculo.png)\n\nComo podrás notar esto es como una tabla donde cada columna corresponde a una variable y cada fila a una observación:\n\n![](./imgs/estructura_tabla_datos.png)\n\nLos archivos .csv son muy comunes para almacenar datos ya que son muy ligeros, se pueden abrir con cualquier programa y se pueden manipular fácilmente.\n\n# Establecer el directorio de trabajo\n\nAlgo fundamental cuando trabajamos con R es establecer nuestro **Directorio de trabajo** o **Working directory**. Este es una cartpeta que RStudio utiliza para encontrar los archivos que uno quiera cargar.\n\nPuedes ver cual es tu directorio de trabajo en la parte superior de tu consola:\n\n![](./imgs/wd_console.png)\n\nTambién puedes preguntarle a R cuál es el directorio de trabajo con el siguiene comando:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngetwd()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"/home/lggj/PARA/proyectos/curso_cibernetica_ibero/cibernetica_para_la_sustentabilidad/procesamiento_de_datos/sesion_04\"\n```\n\n\n:::\n:::\n\n\n\n\n\nCuando trabajamos en RStudio usando Posit Cloud generalmente el directorio de trabajo ya está bien determinado y no hay que hacer nada. Sin embargo, cuando trabajamos en RStudio en nuestras computadoras personales debemos especificar nuestro directorio de trabajo. Para eso debemos dar click en **«Session \\> Set Working Directory \\> Choose Directory»** y elegir la carpeta donde queremos trabajar.\n\n![](./imgs/establecer_wd.png)\n\nOtra forma de establecer el directorio de trabajo es usando la función `setwd()` a la cual le debemos dar la ruta completa a la carpeta donde queremos trabajar:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# setwd(\"/cloud/project/\")\n```\n:::\n\n\n\n\n\n# Subir los datos\n\nSi trabajas en tu computadora personal solo debes colocar los datos el directorio de trabajo, pero al trabajar en Posit Cloud debemos subir los datos para poder usarlos.\n\nPara subir los datos:\n\n1.  En el panel inferior derecho de RStudio selecciona la pestaña **Files**\n\n2.  Da click en **Upload**: ![](./imgs/icono_upload.png)\n\n3.  Da click en **Browse** en la sección de *File to upload*:\n\n    ![](imgs/upload_browse.png)\n\n4.  Busca y selecciona tu archivo csv\n\n5.  Listo. Tu archivo debe aparecer en la lista de archivos.\n\n# Leer los datos\n\nPara leer los datos vamos a usar un paquete que se llama **tidyverse**. Este generalmente hay que instalarlo primero, pero para este proyecto de Posit Cloud yo ya lo instalé previamente por lo que solo hay que pedirle a R que cargue el paquete con la función `library`:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Instalar tidyverse\n# install.packages(\"tidyverse\")\n\n## Cargar tidyverse\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.2     ✔ tibble    3.3.0\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.1.0     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n:::\n\n\n\n\n\nPara leer el archivo usamos una función que se llama `read_csv` a la cual como argumento debemos pasarle la el nombre del archivo que queremos leer (en forma de cadena):\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nread_csv(\"./pokemon.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 800 Columns: 13\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (3): Name, Type 1, Type 2\ndbl (9): #, Total, HP, Attack, Defense, Sp. Atk, Sp. Def, Speed, Generation\nlgl (1): Legendary\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 800 × 13\n     `#` Name   `Type 1` `Type 2` Total    HP Attack Defense `Sp. Atk` `Sp. Def`\n   <dbl> <chr>  <chr>    <chr>    <dbl> <dbl>  <dbl>   <dbl>     <dbl>     <dbl>\n 1     1 Bulba… Grass    Poison     318    45     49      49        65        65\n 2     2 Ivysa… Grass    Poison     405    60     62      63        80        80\n 3     3 Venus… Grass    Poison     525    80     82      83       100       100\n 4     3 Venus… Grass    Poison     625    80    100     123       122       120\n 5     4 Charm… Fire     <NA>       309    39     52      43        60        50\n 6     5 Charm… Fire     <NA>       405    58     64      58        80        65\n 7     6 Chari… Fire     Flying     534    78     84      78       109        85\n 8     6 Chari… Fire     Dragon     634    78    130     111       130        85\n 9     6 Chari… Fire     Flying     634    78    104      78       159       115\n10     7 Squir… Water    <NA>       314    44     48      65        50        64\n# ℹ 790 more rows\n# ℹ 3 more variables: Speed <dbl>, Generation <dbl>, Legendary <lgl>\n```\n\n\n:::\n:::\n\n\n\n\n\nComo podrás ver los datos R los reconoce como una tabla y el comando solo nos imprime una parte de los datos.\n\nNota como la consola se te da información sobre los datos que acabas de importar. En particular podemos ver que los datos tienen 800 filas y 13 columnas. Además abajo nos dice el tipo de dato con el que se importó cada columna. Podemos ver que las columnas `Name`, `Type 1` y `Type 2` las importó como cadenas de caracteres (`chr`). Las columnas `#`, `Total`, `HP`, `Attack`, `Defense`, `Sp. Atk`, `Sp. Def`, `Speed`, `Generation` las importó como números (`dbl`). Y la columna `Legendary` como un valor booleano (`lgl`) que solo puede tomar los valores `TRUE` o `FALSE`.\n\nPara poder trabajar con los datos en R hay que guardarlos en una variable:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npokemon <- read_csv(\"./pokemon.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 800 Columns: 13\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (3): Name, Type 1, Type 2\ndbl (9): #, Total, HP, Attack, Defense, Sp. Atk, Sp. Def, Speed, Generation\nlgl (1): Legendary\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n:::\n\n\n\n\n\n# Ver la tabla de datos\n\nPara visualizar tus datos a manera de una hoja de calculo puedes usar el comando `View` el cual abre una nueva pestaña mostrando los datos:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nView(pokemon)\n```\n:::\n\n\n\n\n\n**Advertencia**: No es recomendable abrir de esta manera archivos muy grandes ya que puedes hacer que R se trabe.\n\nOtra función útil para darnos una idea de cómo se ve un conjunto es la función `head` que nos muestra solo el inicio de nuestra tabla:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(pokemon)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 13\n    `#` Name    `Type 1` `Type 2` Total    HP Attack Defense `Sp. Atk` `Sp. Def`\n  <dbl> <chr>   <chr>    <chr>    <dbl> <dbl>  <dbl>   <dbl>     <dbl>     <dbl>\n1     1 Bulbas… Grass    Poison     318    45     49      49        65        65\n2     2 Ivysaur Grass    Poison     405    60     62      63        80        80\n3     3 Venusa… Grass    Poison     525    80     82      83       100       100\n4     3 Venusa… Grass    Poison     625    80    100     123       122       120\n5     4 Charma… Fire     <NA>       309    39     52      43        60        50\n6     5 Charme… Fire     <NA>       405    58     64      58        80        65\n# ℹ 3 more variables: Speed <dbl>, Generation <dbl>, Legendary <lgl>\n```\n\n\n:::\n:::\n\n\n\n\n\nPodemos controlar el número de filas que queremos ver con el argumento `n`:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(pokemon, n = 10)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 10 × 13\n     `#` Name   `Type 1` `Type 2` Total    HP Attack Defense `Sp. Atk` `Sp. Def`\n   <dbl> <chr>  <chr>    <chr>    <dbl> <dbl>  <dbl>   <dbl>     <dbl>     <dbl>\n 1     1 Bulba… Grass    Poison     318    45     49      49        65        65\n 2     2 Ivysa… Grass    Poison     405    60     62      63        80        80\n 3     3 Venus… Grass    Poison     525    80     82      83       100       100\n 4     3 Venus… Grass    Poison     625    80    100     123       122       120\n 5     4 Charm… Fire     <NA>       309    39     52      43        60        50\n 6     5 Charm… Fire     <NA>       405    58     64      58        80        65\n 7     6 Chari… Fire     Flying     534    78     84      78       109        85\n 8     6 Chari… Fire     Dragon     634    78    130     111       130        85\n 9     6 Chari… Fire     Flying     634    78    104      78       159       115\n10     7 Squir… Water    <NA>       314    44     48      65        50        64\n# ℹ 3 more variables: Speed <dbl>, Generation <dbl>, Legendary <lgl>\n```\n\n\n:::\n:::\n\n\n\n\n\nUna función complementaria a `head` es la función `tail`, la cual nos muestra solo una parte del final de los datos:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntail(pokemon, n = 3)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 × 13\n    `#` Name    `Type 1` `Type 2` Total    HP Attack Defense `Sp. Atk` `Sp. Def`\n  <dbl> <chr>   <chr>    <chr>    <dbl> <dbl>  <dbl>   <dbl>     <dbl>     <dbl>\n1   720 HoopaH… Psychic  Ghost      600    80    110      60       150       130\n2   720 HoopaH… Psychic  Dark       680    80    160      60       170       130\n3   721 Volcan… Fire     Water      600    80    110     120       130        90\n# ℹ 3 more variables: Speed <dbl>, Generation <dbl>, Legendary <lgl>\n```\n\n\n:::\n:::\n\n\n\n\n\nOtra función para echar un vistazo a los datos es la función `glimpse`, la cual nos muestra todas las columnas de manera horizontal:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(pokemon)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 800\nColumns: 13\n$ `#`        <dbl> 1, 2, 3, 3, 4, 5, 6, 6, 6, 7, 8, 9, 9, 10, 11, 12, 13, 14, …\n$ Name       <chr> \"Bulbasaur\", \"Ivysaur\", \"Venusaur\", \"VenusaurMega Venusaur\"…\n$ `Type 1`   <chr> \"Grass\", \"Grass\", \"Grass\", \"Grass\", \"Fire\", \"Fire\", \"Fire\",…\n$ `Type 2`   <chr> \"Poison\", \"Poison\", \"Poison\", \"Poison\", NA, NA, \"Flying\", \"…\n$ Total      <dbl> 318, 405, 525, 625, 309, 405, 534, 634, 634, 314, 405, 530,…\n$ HP         <dbl> 45, 60, 80, 80, 39, 58, 78, 78, 78, 44, 59, 79, 79, 45, 50,…\n$ Attack     <dbl> 49, 62, 82, 100, 52, 64, 84, 130, 104, 48, 63, 83, 103, 30,…\n$ Defense    <dbl> 49, 63, 83, 123, 43, 58, 78, 111, 78, 65, 80, 100, 120, 35,…\n$ `Sp. Atk`  <dbl> 65, 80, 100, 122, 60, 80, 109, 130, 159, 50, 65, 85, 135, 2…\n$ `Sp. Def`  <dbl> 65, 80, 100, 120, 50, 65, 85, 85, 115, 64, 80, 105, 115, 20…\n$ Speed      <dbl> 45, 60, 80, 80, 65, 80, 100, 100, 100, 43, 58, 78, 78, 45, …\n$ Generation <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…\n$ Legendary  <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FAL…\n```\n\n\n:::\n:::\n\n\n\n\n\nSi solo queremos ver los nombres de las columnas de nuestros datos podemos usar la función `names`:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnames(pokemon)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"#\"          \"Name\"       \"Type 1\"     \"Type 2\"     \"Total\"     \n [6] \"HP\"         \"Attack\"     \"Defense\"    \"Sp. Atk\"    \"Sp. Def\"   \n[11] \"Speed\"      \"Generation\" \"Legendary\" \n```\n\n\n:::\n:::\n\n\n\n\n\n# Ejercicio\n\nEn este ejercicio vas a descargar y cargar un conjunto de datos de películas de Pixar\n\n1.  Descarga los datos del siguiente enlace: [películas pixa](https://gist.githubusercontent.com/b3m3bi/fca2b77734e5e3ca92cd4e4616737229/raw/ca1736594f47ae8c204c1eb51e2483d91caac26f/pixar-movies.csv)[r](https://gist.githubusercontent.com/b3m3bi/fca2b77734e5e3ca92cd4e4616737229/raw/ab39db8f7a7e99fd7267f8dc060343f75419d8de/pixar-movies.csv)\n2.  Sube los datos a RStudio\n3.  Lee los datos usando la función `read_csv` y guárdalos en una variable que se llame `pixar`\n4.  Explora la tabla de datos con la función `View`.\n5.  Responde a las siguientes preguntas:\n    -   ¿Cuántas filas y cuantas columnas tienes?\n\n    -   ¿Qué variables incluye tu conjunto de datos? ¿Qué crees que signifique cada variable?\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Escribe aquí tu código\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}