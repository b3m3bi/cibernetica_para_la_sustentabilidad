---
title: "01 - Notebooks"
output: html_document
execution:
  eval: false
---

# Introducci√≥n

En este curso vamos a estar usando documentos como este que tienes frente a t√≠. A estos documentos se conoce como **notebooks**. Los notebooks son archivos muy flexibles que permiten integrar texto en prosa (como este), c√≥digo y figuras.

En este notebook vemos las principales caracter√≠sticas de los **notebooks**, creamos nuestro primer programa y vemos un ejemplo del tipo de an√°lisis que se pueden hacer con R.

**Objetivos**

-   Familiarizarse con la estructura y uso de los notebooks
-   Aprender a ejecutar y modificar una celda de c√≥digo

# Elementos de un notebook

Los notebooks tienen b√°sicamente 2 cosas:

1.  **Texto en prosa**, el cual se puede formatear como en los procesadores de texto (e.g., Word). Se pueden poner encabezados y subencabezados, y darle formato b√°sico al texto como poner **negritas**, *it√°licas*, ~~tachado~~, emojis üòÉ, agregar [enlaces](www.google.com) o listas.

Los notebooks no permiten editar cada m√≠nimo detalle del dise√±o del documento (e.g., cambiar color, cambiar la fuente y su tama√±o). Esto se debe a que son archivos dise√±ados para hacer an√°lisis de datos y ejecutar c√≥digo no para hacer dise√±o gr√°fico.

Algo interesante a notar es que todo el formato que puedes ver del texto se le da con un c√≥digo muy simple. Si cambias el modo de ver el documento de "Visual" a "Source" podr√°s ver que el formato del texto en realidad se les da a los elementos agreg√°ndoles cosas como aster√≠scos y cosas raras. A estas reglas se les conoce como RMarkdown, pero por ahora eso no es importante...

2.  **C√©ldas de c√≥digo**, donde uno puede escribir c√≥digo de R y ver los resultados de su c√≥digo. Una celda de c√≥digo se ve m√°s o menos as√≠:

```{r}
print("Soy una celda de c√≥digo")
```

Las celdas de c√≥digo son los comandos que nosotros le podemos pasar a R para que haga cosas. Para pasarle a R nuestro c√≥digo debemos **ejecutar la celda**. Para ello hay que dar click en el peque√±o signo ‚èµ (¬´Run current chunk¬ª). Al ejecutar el c√≥digo el resultado sale en dos lados: (1) debajo de la celda de c√≥digo y (2) en la consola de R. A veces puede llegar a ser poco pr√°ctico ver los resultados debajo de la celda de c√≥digo ya que ocupa mucho espacio y se hace m√°s confuso saber qu√© es c√≥digo y que no lo es. Podemos desactivar esta opci√≥n dando click en el engrane (¬´Edit de Rmarkdown options...¬ª) y seleccionando ¬´Chunk Output in Console¬ª.

# ¬°Hola mundo!

Cuando uno aprende a programar generalmente inicia creando el programa [¬°Hola mundo!](https://es.wikipedia.org/wiki/Hola_mundo). Este es un programa muy simple que lo √∫nico que hace es imprimir en la pantalla el texto `¬°Hola mundo!`.

En R ese programa se ve as√≠:

```         
print("¬°Hola mundo!")
```

Aqu√≠ lo que tenemos son solo 2 cosas:

1.  la funci√≥n `print()`, la cual imprime en la pantalla el texto que se le pase entre sus par√©ntesis, y
2.  una cadena de texto `"¬°Hola mundo!"`, aqu√≠ son muy imporantes las comillas, ya que esas le indican a R que eso no es parte de su lenguaje sino que es simplemente texto.

Ahora ejecuta el programa que est√° escrito en la siguiente celda:

```{r}
print("¬°Hola mundo!")
```

# Ejercicio

1.  En la siguiente celda crea un programa que imprima el texto `"¬°Hola! Mi nombre es <TU NOMBRE>"`. Al terminar corre la celda para ejecuta tu programa.

```{r}


```

# Un ejemplo m√°s interesante...

Ya aprendimos qu√© son los notebooks y c√≥mo se usan, pero el ejemplo que vimos es muy aburrido y poco √∫til. Veamos c√≥mo se ve un ejemplo m√°s interesante donde analizamos y visualizamos la matr√≠cula de estudiantes de licenciatura en M√©xico.

## Matr√≠cula de licenciatura en M√©xico

El siguiente ejemplo muestra un an√°lisis de datos reales de los [Anuarios Estad√≠sticos de Educaci√≥n Superior](http://www.anuies.mx/informacion-y-servicios/informacion-estadistica-de-educacion-superior/anuario-estadistico-de-educacion-superior) de la ANUIES. Estos datos contienen informaci√≥n sobre el n√∫mero de estudiantes matriculados en distintas universidades de todo M√©xico. Estos son datos los sacan cada a√±o y los que vamos a analizar corresponden al ciclo escolar 2023-2024. No te **proecupes por entender el c√≥digo**, el objetivo de este ejemplo es solo que veas c√≥mo se pueden analizar datos con R.

### Preparar los datos

Importamos paqueter√≠as que vamos a usar para nuestro procesamiento de datos.

```{r}
# install.packages(c("tidyverse", "janitor"))
library(tidyverse)
library(janitor)
```

Importamos los datos del anuario enstad√≠stico de la ANUIES.

```{r}
anuario_2023_2024 <- read_csv(
        "./data/anuario_educacion_superior_2023-2024_v1-2.csv", 
        skip = 3, 
        n_max = 47814,
        col_select = c(1, 3, 6, 7, 8, 10, 12, 14, 15, 16)
        ) |> 
        clean_names() |>
        pivot_longer(
            cols = starts_with("matricula"),
            names_to = "genero",
            values_to = "matricula",
            names_prefix = "matricula_"
        )

```

Los datos del anuario incluyen varias columnas con informaci√≥n del n√∫mero de matriculados en cada programa de estudios en las instituci√≥nes de educaci√≥n superior de M√©xico:

```{r}
View(anuario_2023_2024)
```

Vamos a centrarnos s√≥lo en los estudiantes de nivel licenciatura. Para ello seleccionamos √∫nicamente los registros de programas de licenciatura.

```{r}
licenciatura <- anuario_2023_2024 |> 
    filter(nivel_de_estudios == 'LICENCIATURA UNIVERSITARIA Y TECNOL√ìGICA')


```

### Exploraciones

Ahora podemos empezar a explorar nuestros datos. Primero veamos, ¬øcu√°les son las **universidades que tienen m√°s estudiantes**?

```{r}
licenciatura |> 
  group_by(nombre_institucion) |>
  summarise(
    matricula_total = sum(matricula)
  ) |>
  arrange(desc(matricula_total)) |>
  print(n = 100)
```

Ahora veamos cuales fueron en el ciclo 2023-2024 **las carreras m√°s estudiadas** en M√©xico:

```{r}
licenciatura |>
  group_by(nombre_programa_educativo) |>
  summarise(
    matricula_total = sum(matricula)
  ) |>
  arrange(desc(matricula_total)) |>
  print(n = 10)
```

Ahora investiguemos cuales son las licenciaturas con mayor matr√≠cula en la Ibero. ¬øCu√°ntos estudiantes hay en LISA? Hagamos una visualizaci√≥n para explorar esto.

```{r}
licenciatura |>
  filter(
    nombre_institucion == "UNIVERSIDAD IBEROAMERICANA - CIUDAD DE M√âXICO"
    ) |>
  mutate( 
    nombre_corto_programa = str_to_sentence(
      str_replace(nombre_programa_educativo, "LICENCIATURA EN", "")
      )) |>
  filter(matricula > 0) |>
  group_by(nombre_corto_programa) |>
  summarise(
    matricula = sum(matricula)
  ) |>
  ggplot(
    aes(
      x = matricula,
      y = fct_reorder(nombre_corto_programa, matricula),
      label = matricula
      )) +
  geom_col(fill = "#EFB42A") +
  geom_text(
    position = position_stack(vjust = 0.5),
    size = 3
    ) +
  labs(
    y = "",
    x = "",
    title = "N√∫mero de estudiantes matriculados en la IBERO por carrera",
    caption = "Fuente: Anuarios estad√≠sticos de Educaci√≥n Superior 2023-2024. ANUES"
    ) + 
  theme_minimal() +
  theme(
    text=element_text(size = 10),
    plot.title = element_text(size = 12, hjust = 0, margin = margin(b = 20)),
    plot.title.position = "plot",
    panel.grid.major.y = element_blank(),
    panel.grid.major.x = element_blank(),
    panel.grid.minor.x = element_blank(),
    axis.text.x = element_blank(),
    axis.text.y = element_text(margin = margin(r = -12))
    
    ) 
```

## Ejercicios

1.  Ve a la celda previa y busca donde dice `UNIVERSIDAD IBEROAMERICANA - CIUDAD DE M√âXICO` y sustituye ese texto por `UNIVERSIDAD AN√ÅHUAC`. Observa c√≥mo cambia tu gr√°fica ¬øCu√°l es la licenciatura con m√°s estudiantes en la Ah√°huac?
2.  Ahora explora los datos de la `UNIVERSIDAD AUT√ìNOMA METROPOLITANA`. ¬øCu√°l es la licenciatura con m√°s estudiantes en la UAM?
3.  Ahora explora los datos de la IBERO de Puebla (`UNIVERSIDAD IBEROAMERICANA - PUEBLA`). ¬øCu√°l es la licenciatura con m√°s estudiantes en la IBERO de Puebla?
